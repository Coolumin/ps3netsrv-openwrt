name: CI

on: [push]

jobs:
  build-mips_24kc:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/ath79/generic/openwrt-sdk-21.02.3-ath79-generic_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-ath79-generic_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-ath79-generic_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_mips_24kc
        path: /home/runner/openwrt-sdk-21.02.3-ath79-generic_gcc-8.4.0_musl.Linux-x86_64/bin/packages/mips_24kc/ps3netsrv_feed/

  build-mipsel_24kc:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/ramips/mt7621/openwrt-sdk-21.02.3-ramips-mt7621_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-ramips-mt7621_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-ramips-mt7621_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_mipsel_24kc
        path: /home/runner/openwrt-sdk-21.02.3-ramips-mt7621_gcc-8.4.0_musl.Linux-x86_64/bin/packages/mipsel_24kc/ps3netsrv_feed/

  build-aarch64_cortex-a53:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/mvebu/cortexa53/openwrt-sdk-21.02.3-mvebu-cortexa53_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-mvebu-cortexa53_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-mvebu-cortexa53_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_aarch64_cortex-a53
        path: /home/runner/openwrt-sdk-21.02.3-mvebu-cortexa53_gcc-8.4.0_musl.Linux-x86_64/bin/packages/aarch64_cortex-a53/ps3netsrv_feed/
        
  build-aarch64_cortex-a72:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/mvebu/cortexa72/openwrt-sdk-21.02.3-mvebu-cortexa72_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-mvebu-cortexa72_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-mvebu-cortexa72_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_aarch64_cortex-a72
        path: /home/runner/openwrt-sdk-21.02.3-mvebu-cortexa72_gcc-8.4.0_musl.Linux-x86_64/bin/packages/aarch64_cortex-a72/ps3netsrv_feed/

  build-arm_cortex-a9_vfpv3-d16:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/mvebu/cortexa9/openwrt-sdk-21.02.3-mvebu-cortexa9_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-mvebu-cortexa9_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-mvebu-cortexa9_gcc-8.4.0_musl_eabi.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arm_cortex-a9_vfpv3-d16
        path: /home/runner/openwrt-sdk-21.02.3-mvebu-cortexa9_gcc-8.4.0_musl_eabi.Linux-x86_64/bin/packages/arm_cortex-a9_vfpv3-d16/ps3netsrv_feed/

  build-mips_4kec:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/realtek/generic/openwrt-sdk-21.02.3-realtek-generic_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-realtek-generic_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-realtek-generic_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_mips_4kec
        path: /home/runner/openwrt-sdk-21.02.3-realtek-generic_gcc-8.4.0_musl.Linux-x86_64/bin/packages/mips_4kec/ps3netsrv_feed/
        
  build-mips_mips32:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/bcm63xx/generic/openwrt-sdk-21.02.3-bcm63xx-generic_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-bcm63xx-generic_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-bcm63xx-generic_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_mips_mips32
        path: /home/runner/openwrt-sdk-21.02.3-bcm63xx-generic_gcc-8.4.0_musl.Linux-x86_64/bin/packages/mips_mips32/ps3netsrv_feed/
        
  build-mipsel_24kc_24kf:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/pistachio/generic/openwrt-sdk-21.02.3-pistachio_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-pistachio_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-pistachio_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_mipsel_24kc_24kf
        path: /home/runner/openwrt-sdk-21.02.3-pistachio_gcc-8.4.0_musl.Linux-x86_64/bin/packages/mipsel_24kc_24kf/ps3netsrv_feed/
        
  build-mipsel_74kc:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/bcm47xx/mips74k/openwrt-sdk-21.02.3-bcm47xx-mips74k_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-bcm47xx-mips74k_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-bcm47xx-mips74k_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_mipsel_74kc
        path: /home/runner/openwrt-sdk-21.02.3-bcm47xx-mips74k_gcc-8.4.0_musl.Linux-x86_64/bin/packages/mipsel_74kc/ps3netsrv_feed/
        
  build-mipsel_mips32:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/bcm47xx/generic/openwrt-sdk-21.02.3-bcm47xx-generic_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-bcm47xx-generic_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-bcm47xx-generic_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_mipsel_mips32
        path: /home/runner/openwrt-sdk-21.02.3-bcm47xx-generic_gcc-8.4.0_musl.Linux-x86_64/bin/packages/mipsel_mips32/ps3netsrv_feed/

  build-mips64_octeonplus:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/octeon/generic/openwrt-sdk-21.02.3-octeon_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-octeon_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-octeon_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_mips64_octeonplus
        path: /home/runner/openwrt-sdk-21.02.3-octeon_gcc-8.4.0_musl.Linux-x86_64/bin/packages/mips64_octeonplus/ps3netsrv_feed/

  build-powerpc_464fp:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/apm821xx/nand/openwrt-sdk-21.02.3-apm821xx-nand_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-apm821xx-nand_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-apm821xx-nand_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_powerpc_464fp
        path: /home/runner/openwrt-sdk-21.02.3-apm821xx-nand_gcc-8.4.0_musl.Linux-x86_64/bin/packages/powerpc_464fp/ps3netsrv_feed/
        
  build-powerpc_8540:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/mpc85xx/p1010/openwrt-sdk-21.02.3-mpc85xx-p1010_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-mpc85xx-p1010_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-mpc85xx-p1010_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_powerpc_8540
        path: /home/runner/openwrt-sdk-21.02.3-mpc85xx-p1010_gcc-8.4.0_musl.Linux-x86_64/bin/packages/powerpc_8540/ps3netsrv_feed/
        
  build-aarch64_generic:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/layerscape/armv8_64b/openwrt-sdk-21.02.3-layerscape-armv8_64b_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-layerscape-armv8_64b_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-layerscape-armv8_64b_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_aarch64_generic
        path: /home/runner/openwrt-sdk-21.02.3-layerscape-armv8_64b_gcc-8.4.0_musl.Linux-x86_64/bin/packages/aarch64_generic/ps3netsrv_feed/
        
  build-arc_arc700:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/arc770/generic/openwrt-sdk-21.02.3-arc770-generic_gcc-8.4.0_glibc.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-arc770-generic_gcc-8.4.0_glibc.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-arc770-generic_gcc-8.4.0_glibc.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arc_arc700
        path: /home/runner/openwrt-sdk-21.02.3-arc770-generic_gcc-8.4.0_glibc.Linux-x86_64/bin/packages/arc_arc700/ps3netsrv_feed/
        
  build-arc_archs:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/archs38/generic/openwrt-sdk-21.02.3-archs38-generic_gcc-8.4.0_glibc.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-archs38-generic_gcc-8.4.0_glibc.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-archs38-generic_gcc-8.4.0_glibc.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arc_archs
        path: /home/runner/openwrt-sdk-21.02.3-archs38-generic_gcc-8.4.0_glibc.Linux-x86_64/bin/packages/arc_archs/ps3netsrv_feed/
        
  build-arm_arm926ej-s:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/at91/sam9x/openwrt-sdk-21.02.3-at91-sam9x_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-at91-sam9x_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-at91-sam9x_gcc-8.4.0_musl_eabi.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arm_arm926ej-s
        path: /home/runner/openwrt-sdk-21.02.3-at91-sam9x_gcc-8.4.0_musl_eabi.Linux-x86_64/bin/packages/arm_arm926ej-s/ps3netsrv_feed/
        
  build-arm_arm1176jzf-s_vfp:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/bcm27xx/bcm2708/openwrt-sdk-21.02.3-bcm27xx-bcm2708_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-bcm27xx-bcm2708_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-bcm27xx-bcm2708_gcc-8.4.0_musl_eabi.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arm_arm1176jzf-s_vfp
        path: /home/runner/openwrt-sdk-21.02.3-bcm27xx-bcm2708_gcc-8.4.0_musl_eabi.Linux-x86_64/bin/packages/arm_arm1176jzf-s_vfp/ps3netsrv_feed/

  build-arm_cortex-a15_neon-vfpv4:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/armvirt/32/openwrt-sdk-21.02.3-armvirt-32_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-armvirt-32_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-armvirt-32_gcc-8.4.0_musl_eabi.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arm_cortex-a15_neon-vfpv4
        path: /home/runner/openwrt-sdk-21.02.3-armvirt-32_gcc-8.4.0_musl_eabi.Linux-x86_64/bin/packages/arm_cortex-a15_neon-vfpv4/ps3netsrv_feed/
        
  build-arm_cortex-a5_vfpv4:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/at91/sama5/openwrt-sdk-21.02.3-at91-sama5_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-at91-sama5_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-at91-sama5_gcc-8.4.0_musl_eabi.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arm_cortex-a5_vfpv4
        path: /home/runner/openwrt-sdk-21.02.3-at91-sama5_gcc-8.4.0_musl_eabi.Linux-x86_64/bin/packages/arm_cortex-a5_vfpv4/ps3netsrv_feed/
        
  build-arm_cortex-a7:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/mediatek/mt7629/openwrt-sdk-21.02.3-mediatek-mt7629_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-mediatek-mt7629_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-mediatek-mt7629_gcc-8.4.0_musl_eabi.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arm_cortex-a7
        path: /home/runner/openwrt-sdk-21.02.3-mediatek-mt7629_gcc-8.4.0_musl_eabi.Linux-x86_64/bin/packages/arm_cortex-a7/ps3netsrv_feed/
        
  build-arm_cortex-a7_neon-vfpv4:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/bcm27xx/bcm2709/openwrt-sdk-21.02.3-bcm27xx-bcm2709_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-bcm27xx-bcm2709_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-bcm27xx-bcm2709_gcc-8.4.0_musl_eabi.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arm_cortex-a7_neon-vfpv4
        path: /home/runner/openwrt-sdk-21.02.3-bcm27xx-bcm2709_gcc-8.4.0_musl_eabi.Linux-x86_64/bin/packages/arm_cortex-a7_neon-vfpv4/ps3netsrv_feed/
        
  build-arm_cortex-a8_vfpv3:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/omap/generic/openwrt-sdk-21.02.3-omap_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-omap_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-omap_gcc-8.4.0_musl_eabi.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arm_cortex-a8_vfpv3
        path: /home/runner/openwrt-sdk-21.02.3-omap_gcc-8.4.0_musl_eabi.Linux-x86_64/bin/packages/arm_cortex-a8_vfpv3/ps3netsrv_feed/
        
  build-arm_cortex-a9:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/bcm53xx/generic/openwrt-sdk-21.02.3-bcm53xx-generic_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-bcm53xx-generic_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-bcm53xx-generic_gcc-8.4.0_musl_eabi.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arm_cortex-a9
        path: /home/runner/openwrt-sdk-21.02.3-bcm53xx-generic_gcc-8.4.0_musl_eabi.Linux-x86_64/bin/packages/arm_cortex-a9/ps3netsrv_feed/

  build-arm_cortex-a9_neon:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/imx6/generic/openwrt-sdk-21.02.3-imx6_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-imx6_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-imx6_gcc-8.4.0_musl_eabi.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arm_cortex-a9_neon
        path: /home/runner/openwrt-sdk-21.02.3-imx6_gcc-8.4.0_musl_eabi.Linux-x86_64/bin/packages/arm_cortex-a9_neon/ps3netsrv_feed/
        

  build-arm_fa526:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/gemini/generic/openwrt-sdk-21.02.3-gemini_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-gemini_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-gemini_gcc-8.4.0_musl_eabi.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arm_fa526
        path: /home/runner/openwrt-sdk-21.02.3-gemini_gcc-8.4.0_musl_eabi.Linux-x86_64/bin/packages/arm_fa526/ps3netsrv_feed/
        
  build-arm_mpcore:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/oxnas/ox820/openwrt-sdk-21.02.3-oxnas-ox820_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-oxnas-ox820_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-oxnas-ox820_gcc-8.4.0_musl_eabi.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arm_mpcore
        path: /home/runner/openwrt-sdk-21.02.3-oxnas-ox820_gcc-8.4.0_musl_eabi.Linux-x86_64/bin/packages/arm_mpcore/ps3netsrv_feed/
        
  build-arm_xscale:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/kirkwood/generic/openwrt-sdk-21.02.3-kirkwood_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-kirkwood_gcc-8.4.0_musl_eabi.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-kirkwood_gcc-8.4.0_musl_eabi.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_arm_xscale
        path: /home/runner/openwrt-sdk-21.02.3-kirkwood_gcc-8.4.0_musl_eabi.Linux-x86_64/bin/packages/arm_xscale/ps3netsrv_feed/
        
  build-x86_64:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/x86/64/openwrt-sdk-21.02.3-x86-64_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-x86-64_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-x86-64_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_x86_64
        path: /home/runner/openwrt-sdk-21.02.3-x86-64_gcc-8.4.0_musl.Linux-x86_64/bin/packages/x86_64/ps3netsrv_feed/
        
  build-i386_pentium4:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/x86/generic/openwrt-sdk-21.02.3-x86-generic_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-x86-generic_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-x86-generic_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_i386_pentium4
        path: /home/runner/openwrt-sdk-21.02.3-x86-generic_gcc-8.4.0_musl.Linux-x86_64/bin/packages/i386_pentium4/ps3netsrv_feed/
        
  build-i386_pentium-mmx:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v1
    - name: build packages
      run: |
        cd $HOME
        sudo apt-get update
        sudo apt-get install -y \
        build-essential \
        curl \
        file \
        gawk \
        gettext \
        git \
        libncurses5-dev \
        libssl-dev \
        python2.7 \
        python3 \
        rsync \
        subversion \
        sudo \
        swig \
        unzip \
        wget \
        zlib1g-dev
        wget -c https://downloads.openwrt.org/releases/21.02.3/targets/x86/geode/openwrt-sdk-21.02.3-x86-geode_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        tar xf openwrt-sdk-21.02.3-x86-geode_gcc-8.4.0_musl.Linux-x86_64.tar.xz
        cd openwrt-sdk-21.02.3-x86-geode_gcc-8.4.0_musl.Linux-x86_64
        echo $USIGN_SECRET | base64 -d > key-build
        echo "src-git ps3netsrv_feed https://github.com/jhonathanc/ps3netsrv-openwrt.git" >> feeds.conf.default
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        make defconfig
        make package/ps3netsrv/download
        make package/ps3netsrv/prepare
        make package/ps3netsrv/compile
      env:
        USIGN_SECRET: ${{ secrets.USIGN_SECRET }}
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: ps3netsrv_i386_pentium-mmx
        path: /home/runner/openwrt-sdk-21.02.3-x86-geode_gcc-8.4.0_musl.Linux-x86_64/bin/packages/i386_pentium-mmx/ps3netsrv_feed/
